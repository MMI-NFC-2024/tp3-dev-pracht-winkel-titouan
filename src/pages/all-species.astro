---
import Layout from "../layouts/Layout.astro";
import GraphicSpecies from "../components/GraphicSpecies.astro";
---

<Layout>
    <div class="max-w-6xl mx-auto p-6">
        <h1 class="text-3xl font-bold text-center mb-8">All Penguin Species</h1>

        <!-- Menu remplacé par un select -->
        <nav class="flex justify-center mb-6">
            <label for="species" class="mr-2 font-semibold"
                >Choisir une espèce :</label
            >
            <select id="species" class="border rounded px-2 py-1">
                <option value="">-- Sélectionner --</option>
                <option value="Adelie">Adelie</option>
                <option value="Gentoo">Gentoo</option>
                <option value="Chinstrap">Chinstrap</option>
            </select>
        </nav>

        <!-- Slider -->
        <div
            class="flex overflow-x-auto scroll-smooth snap-x snap-mandatory gap-4"
        >
            <section
                id="Adelie"
                class="min-w-full snap-start p-4 bg-gray-50 rounded-lg shadow"
            >
                <h2 class="text-xl font-bold mb-4 text-center text-blue-600">
                    Adelie
                </h2>
                <GraphicSpecies species="Adelie" />
            </section>

            <section
                id="Gentoo"
                class="min-w-full snap-start p-4 bg-gray-50 rounded-lg shadow"
            >
                <h2 class="text-xl font-bold mb-4 text-center text-green-600">
                    Gentoo
                </h2>
                <GraphicSpecies species="Gentoo" />
            </section>

            <section
                id="Chinstrap"
                class="min-w-full snap-start p-4 bg-gray-50 rounded-lg shadow"
            >
                <h2 class="text-xl font-bold mb-4 text-center text-red-600">
                    Chinstrap
                </h2>
                <GraphicSpecies species="Chinstrap" />
            </section>
        </div>
    </div>

    <!-- Script côté client -->
    <script is:inline>
        document.addEventListener("DOMContentLoaded", () => {
            const select = document.getElementById("species");
            if (!select) return;

            // Pré-sélection si hash présent
            if (location.hash) {
                const current = location.hash.slice(1);
                if ([...select.options].some((o) => o.value === current)) {
                    select.value = current;
                    document
                        .getElementById(current)
                        ?.scrollIntoView({ behavior: "smooth" });
                }
            }

            // Scroll vers la section choisie au changement
            select.addEventListener("change", (evt) => {
                const value = evt.target.value;
                if (value) {
                    location.hash = value;
                    const target = document.getElementById(value);
                    if (target) {
                        target.scrollIntoView({ behavior: "smooth" });
                    } else {
                        console.warn("Section introuvable:", value);
                    }
                }
            });
        });
    </script>
</Layout>
